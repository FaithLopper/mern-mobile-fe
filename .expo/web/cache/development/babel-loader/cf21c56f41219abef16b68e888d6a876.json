{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/extends\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useState, useCallback } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport { Header, Item, Input } from \"native-base\";\nimport Icon from \"@expo/vector-icons/FontAwesome\";\nimport { useFocusEffect } from \"@react-navigation/native\";\nimport ListItem from \"./ListItem\";\nimport axios from \"axios\";\nimport baseURL from \"../../assets/common/baseUrl\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport EasyButton from \"../../Shared/StyledComponents/EasyButton\";\n\nvar _Dimensions$get = Dimensions.get(\"window\"),\n    height = _Dimensions$get.height,\n    width = _Dimensions$get.width;\n\nvar ListHeader = function ListHeader() {\n  return React.createElement(View, {\n    elevation: 1,\n    style: styles.listHeader\n  }, React.createElement(View, {\n    style: styles.headerItem\n  }), React.createElement(View, {\n    style: styles.headerItem\n  }, React.createElement(Text, {\n    style: {\n      fontWeight: \"600\"\n    }\n  }, \"Brand\")), React.createElement(View, {\n    style: styles.headerItem\n  }, React.createElement(Text, {\n    style: {\n      fontWeight: \"600\"\n    }\n  }, \"Name\")), React.createElement(View, {\n    style: styles.headerItem\n  }, React.createElement(Text, {\n    style: {\n      fontWeight: \"600\"\n    }\n  }, \"Category\")), React.createElement(View, {\n    style: styles.headerItem\n  }, React.createElement(Text, {\n    style: {\n      fontWeight: \"600\"\n    }\n  }, \"Price\")));\n};\n\nvar Products = function Products(props) {\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      productList = _useState2[0],\n      setProductList = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      productFilter = _useState4[0],\n      setProductFilter = _useState4[1];\n\n  var _useState5 = useState(true),\n      _useState6 = _slicedToArray(_useState5, 2),\n      loading = _useState6[0],\n      setLoading = _useState6[1];\n\n  var _useState7 = useState(),\n      _useState8 = _slicedToArray(_useState7, 2),\n      token = _useState8[0],\n      setToken = _useState8[1];\n\n  useFocusEffect(useCallback(function () {\n    AsyncStorage.getItem(\"jwt\").then(function (res) {\n      setToken(res);\n    }).catch(function (error) {\n      return console.log(error);\n    });\n    axios.get(baseURL + \"products\").then(function (res) {\n      setProductList(res.data);\n      setProductFilter(res.data);\n      setLoading(false);\n    });\n    return function () {\n      setProductList();\n      setProductFilter();\n      setLoading(true);\n    };\n  }, []));\n\n  var searchProduct = function searchProduct(text) {\n    if (text == \"\") {\n      setProductFilter(productList);\n    }\n\n    setProductFilter(productList.filter(function (i) {\n      return i.name.toLowerCase().includes(text.toLowerCase());\n    }));\n  };\n\n  var deleteProduct = function deleteProduct(id) {\n    axios.delete(baseURL + \"products/\" + id, {\n      headers: {\n        Authorization: \"Bearer \" + token\n      }\n    }).then(function (res) {\n      var products = productFilter.filter(function (item) {\n        return item.id !== id;\n      });\n      setProductFilter(products);\n    }).catch(function (error) {\n      return console.log(error);\n    });\n  };\n\n  return React.createElement(View, {\n    style: styles.container\n  }, React.createElement(View, {\n    style: styles.buttonContainer\n  }, React.createElement(EasyButton, {\n    secondary: true,\n    medium: true,\n    onPress: function onPress() {\n      return props.navigation.navigate(\"Orders\");\n    }\n  }, React.createElement(Icon, {\n    name: \"shopping-bag\",\n    size: 18,\n    color: \"white\"\n  }), React.createElement(Text, {\n    style: styles.buttonText\n  }, \"Orders\")), React.createElement(EasyButton, {\n    secondary: true,\n    medium: true,\n    onPress: function onPress() {\n      return props.navigation.navigate(\"ProductForm\");\n    }\n  }, React.createElement(Icon, {\n    name: \"plus\",\n    size: 18,\n    color: \"white\"\n  }), React.createElement(Text, {\n    style: styles.buttonText\n  }, \"Products\")), React.createElement(EasyButton, {\n    secondary: true,\n    medium: true,\n    onPress: function onPress() {\n      return props.navigation.navigate(\"Categories\");\n    }\n  }, React.createElement(Icon, {\n    name: \"plus\",\n    size: 18,\n    color: \"white\"\n  }), React.createElement(Text, {\n    style: styles.buttonText\n  }, \"Categories\"))), React.createElement(View, null, React.createElement(Header, {\n    searchBar: true,\n    rounded: true\n  }, React.createElement(Item, {\n    style: {\n      padding: 5\n    }\n  }, React.createElement(Icon, {\n    name: \"search\"\n  }), React.createElement(Input, {\n    placeholder: \"Search\",\n    onChangeText: function onChangeText(text) {\n      return searchProduct(text);\n    }\n  })))), loading ? React.createElement(View, {\n    style: styles.spinner\n  }, React.createElement(ActivityIndicator, {\n    size: \"large\",\n    color: \"red\"\n  })) : React.createElement(FlatList, {\n    data: productFilter,\n    ListHeaderComponent: ListHeader,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item,\n          index = _ref.index;\n      return React.createElement(ListItem, _extends({}, item, {\n        navigation: props.navigation,\n        index: index,\n        delete: deleteProduct\n      }));\n    },\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    }\n  }));\n};\n\nvar styles = StyleSheet.create({\n  listHeader: {\n    flexDirection: \"row\",\n    padding: 5,\n    backgroundColor: \"gainsboro\"\n  },\n  headerItem: {\n    margin: 3,\n    width: width / 6\n  },\n  spinner: {\n    height: height / 2,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  },\n  container: {\n    marginBottom: 160,\n    backgroundColor: \"white\"\n  },\n  buttonContainer: {\n    margin: 20,\n    alignSelf: \"center\",\n    flexDirection: \"row\"\n  },\n  buttonText: {\n    marginLeft: 4,\n    color: \"white\"\n  }\n});\nexport default Products;","map":{"version":3,"names":["React","useState","useCallback","Header","Item","Input","Icon","useFocusEffect","ListItem","axios","baseURL","AsyncStorage","EasyButton","Dimensions","get","height","width","ListHeader","styles","listHeader","headerItem","fontWeight","Products","props","productList","setProductList","productFilter","setProductFilter","loading","setLoading","token","setToken","getItem","then","res","catch","error","console","log","data","searchProduct","text","filter","i","name","toLowerCase","includes","deleteProduct","id","delete","headers","Authorization","products","item","container","buttonContainer","navigation","navigate","buttonText","padding","spinner","index","StyleSheet","create","flexDirection","backgroundColor","margin","alignItems","justifyContent","marginBottom","alignSelf","marginLeft","color"],"sources":["D:/University/YEAR_3/Mobile_Final/new/mern-stack-ecommerce/easy-shop/Screens/Admin/Products.js"],"sourcesContent":["import React, { useState, useCallback } from \"react\";\nimport {\n  View,\n  Text,\n  FlatList,\n  ActivityIndicator,\n  StyleSheet,\n  Dimensions,\n  Button,\n} from \"react-native\";\nimport { Header, Item, Input } from \"native-base\";\nimport Icon from \"react-native-vector-icons/FontAwesome\";\nimport { useFocusEffect } from \"@react-navigation/native\";\nimport ListItem from \"./ListItem\";\n\nimport axios from \"axios\";\nimport baseURL from \"../../assets/common/baseUrl\";\n// import AsyncStorage from \"@react-native-community/async-storage\"\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport EasyButton from \"../../Shared/StyledComponents/EasyButton\";\n\nvar { height, width } = Dimensions.get(\"window\");\n\nconst ListHeader = () => {\n  return (\n    <View elevation={1} style={styles.listHeader}>\n      <View style={styles.headerItem}></View>\n      <View style={styles.headerItem}>\n        <Text style={{ fontWeight: \"600\" }}>Brand</Text>\n      </View>\n      <View style={styles.headerItem}>\n        <Text style={{ fontWeight: \"600\" }}>Name</Text>\n      </View>\n      <View style={styles.headerItem}>\n        <Text style={{ fontWeight: \"600\" }}>Category</Text>\n      </View>\n      <View style={styles.headerItem}>\n        <Text style={{ fontWeight: \"600\" }}>Price</Text>\n      </View>\n    </View>\n  );\n};\n\nconst Products = (props) => {\n  const [productList, setProductList] = useState();\n  const [productFilter, setProductFilter] = useState();\n  const [loading, setLoading] = useState(true);\n  const [token, setToken] = useState();\n\n  useFocusEffect(\n    useCallback(() => {\n      // Get Token\n      AsyncStorage.getItem(\"jwt\")\n        .then((res) => {\n          setToken(res);\n        })\n        .catch((error) => console.log(error));\n\n      axios.get(`${baseURL}products`).then((res) => {\n        setProductList(res.data);\n        setProductFilter(res.data);\n        setLoading(false);\n      });\n\n      return () => {\n        setProductList();\n        setProductFilter();\n        setLoading(true);\n      };\n    }, [])\n  );\n\n  const searchProduct = (text) => {\n    if (text == \"\") {\n      setProductFilter(productList);\n    }\n    setProductFilter(\n      productList.filter((i) =>\n        i.name.toLowerCase().includes(text.toLowerCase())\n      )\n    );\n  };\n\n  const deleteProduct = (id) => {\n    axios\n      .delete(`${baseURL}products/${id}`, {\n        headers: { Authorization: `Bearer ${token}` },\n      })\n      .then((res) => {\n        const products = productFilter.filter((item) => item.id !== id);\n        setProductFilter(products);\n      })\n      .catch((error) => console.log(error));\n  };\n\n  return (\n    <View style={styles.container}>\n      <View style={styles.buttonContainer}>\n        <EasyButton\n          secondary\n          medium\n          onPress={() => props.navigation.navigate(\"Orders\")}\n        >\n          <Icon name=\"shopping-bag\" size={18} color=\"white\" />\n          <Text style={styles.buttonText}>Orders</Text>\n        </EasyButton>\n        <EasyButton\n          secondary\n          medium\n          onPress={() => props.navigation.navigate(\"ProductForm\")}\n        >\n          <Icon name=\"plus\" size={18} color=\"white\" />\n          <Text style={styles.buttonText}>Products</Text>\n        </EasyButton>\n        <EasyButton\n          secondary\n          medium\n          onPress={() => props.navigation.navigate(\"Categories\")}\n        >\n          <Icon name=\"plus\" size={18} color=\"white\" />\n          <Text style={styles.buttonText}>Categories</Text>\n        </EasyButton>\n      </View>\n      <View>\n        <Header searchBar rounded>\n          <Item style={{ padding: 5 }}>\n            <Icon name=\"search\" />\n            <Input\n              placeholder=\"Search\"\n              onChangeText={(text) => searchProduct(text)}\n            />\n          </Item>\n        </Header>\n      </View>\n\n      {loading ? (\n        <View style={styles.spinner}>\n          <ActivityIndicator size=\"large\" color=\"red\" />\n        </View>\n      ) : (\n        <FlatList\n          data={productFilter}\n          ListHeaderComponent={ListHeader}\n          renderItem={({ item, index }) => (\n            <ListItem\n              {...item}\n              navigation={props.navigation}\n              index={index}\n              delete={deleteProduct}\n            />\n          )}\n          keyExtractor={(item) => item.id}\n        />\n      )}\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  listHeader: {\n    flexDirection: \"row\",\n    padding: 5,\n    backgroundColor: \"gainsboro\",\n  },\n  headerItem: {\n    margin: 3,\n    width: width / 6,\n  },\n  spinner: {\n    height: height / 2,\n    alignItems: \"center\",\n    justifyContent: \"center\",\n  },\n  container: {\n    marginBottom: 160,\n    backgroundColor: \"white\",\n  },\n  buttonContainer: {\n    margin: 20,\n    alignSelf: \"center\",\n    flexDirection: \"row\",\n  },\n  buttonText: {\n    marginLeft: 4,\n    color: \"white\",\n  },\n});\n\nexport default Products;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}